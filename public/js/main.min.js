!function(){"use strict";function e(e){if("/"===e[0])throw error("Path must start without the /");return`https://bechdel.azurewebsites.net/api/${e}`}var t={getAll:async function(t,a){let n;return n=a?await fetch(e(`films/${a}/?page=${t}&pageSize=12`)):await fetch(e(`films/?page=${t}&pageSize=12`)),await n.json()},getPassed:async function(t,a){let n;return n=a?await fetch(e(`films/passed/${a}/?page=${t}&pageSize=12`)):await fetch(e(`films/passed/?page=${t}&pageSize=12`)),await n.json()},getFailed:async function(t,a){let n;return n=a?await fetch(e(`films/failed/${a}/?page=${t}&pageSize=12`)):await fetch(e(`films/failed/?page=${t}&pageSize=12`)),await n.json()},getYears:async function(t,a){const n=await fetch(e("years"));return await n.json()}};const a=document.getElementById("results"),n=document.getElementById("year-select"),s=document.getElementById("prev-page"),i=document.getElementById("next-page"),l={None:Symbol("NONE"),All:Symbol("ALL"),Passed:Symbol("PASSED"),Failed:Symbol("FAILED")},c={category:l.None,page:1,pages:0,total:0,currentYear:null};async function d(e){let d;await async function(){if(0===n.options.length){const e=await t.getYears();for(year of["All Years",...e])n.add(new Option(year,"All Years"==year?null:Number(year)))}}(),e||(e=c.category);const r="null"==n.value?null:Number(n.value);c.category==e&&r==c.currentYear||(e&&(c.category=e),c.page=1,c.currentYear=r),e===l.All?d=await t.getAll(c.page,c.currentYear):e===l.Failed?d=await t.getFailed(c.page,c.currentYear):e===l.Passed?d=await t.getPassed(c.page,c.currentYear):console.error("Bad Category Used..."),c.pageCount=d.pageCount,c.count=d.count,function(e){a.innerHTML="";const t=[];for(let a of e.results)t.push(o(a));a.innerHTML=t.join("")}(d),function(){1==c.page?s.classList.add("hidden"):s.classList.remove("hidden");c.page>=c.pageCount?i.classList.add("hidden"):i.classList.remove("hidden")}()}function o(e){return`\n  <div class="h-72">\n     <div class="w-48 flex-none relative">\n      <img src="${e.posterUrl}" alt="${e.title}"  class="absolute"/>\n    </div>\n    <div class="ml-48">\n      <div class="title">HOLA</div>\n      <div class="info">${e.year}</div>\n      <div class="info">${e.rating}</div>\n      <div class="info">Passed: ${e.passed}</div>\n      <div class="info">Reason: ${e.reason}</div>\n      <div class="info">Budget: $${e.budget.toLocaleString("en-US")}</div>\n      <div class="info">Domestic Gross: $${e.domesticGross.toLocaleString("en-US")}</div>\n      <div class="info">International Gross: $${e.internationalGross.toLocaleString("en-US")}</div>\n      <p>${e.overview}</p>\n    </div>\n  </div>`}n.addEventListener("change",(async e=>{await d()})),s.addEventListener("click",(async e=>{c.page--,await d()})),i.addEventListener("click",(async e=>{c.page++,await d()}));const r=async()=>await d(l.All),u=document.getElementById("menu-all"),g=document.getElementById("menu-pass"),m=document.getElementById("menu-fail"),f=document.getElementById("toggle-dark");function y(){u.addEventListener("click",(async()=>{await r(),v(l.All)})),g.addEventListener("click",(async()=>{await(async()=>await d(l.Passed))(),v(l.Passed)})),m.addEventListener("click",(async()=>{await(async()=>await d(l.Failed))(),v(l.Failed)})),f.addEventListener("click",(async()=>{document.body.classList.toggle("dark")}))}function v(e){const t=(e,t)=>{t?e.classList.contains("selected")||e.classList.add("selected"):e.classList.remove("selected")};t(u,e===l.All),t(g,e===l.Passed),t(m,e===l.Failed)}document.addEventListener("DOMContentLoaded",(async e=>{y(),function(){const e=document.getElementById("mail"),t=document.getElementById("send-message"),a=document.getElementById("send-button");t.addEventListener("click",(()=>e.showModal())),document.getElementById("cancel-button").addEventListener("click",(()=>e.close())),document.getElementById("close-icon").addEventListener("click",(()=>e.close()));const n=document.getElementById("mail-form");n.addEventListener("submit",(e=>{e.preventDefault();const t=document.querySelectorAll("#mail-form input, #mail-form textarea");for(let e of t)e.value="";document.getElementById("message").innerText="Sent..."})),n.addEventListener("change",(()=>{let e=!0;for(let t of n)if(t.validity&&!1===t.validity.valid){e=!1;break}a.disabled=!e}))}(),await r()}))}();
